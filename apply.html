<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Apply</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"></head><body><nav class="navbar navbar-dark bg-primary"><div class="container"><a class="navbar-brand" href="index.html">Athis Jobs</a></div></nav><div class="container my-4"><h3>Apply</h3><form id="form" enctype="multipart/form-data" class="mt-3"><div class="mb-3"><label>Job</label><input id="jobTitle" class="form-control" readonly></div><div class="mb-3"><label>Full name</label><input id="fullName" class="form-control" required></div><div class="mb-3"><label>Email</label><input id="email" class="form-control" required></div><div class="mb-3"><label>Resume (PDF)</label><input id="resume" type="file" accept=".pdf" class="form-control" required></div><button class="btn btn-success">Submit</button></form><div id="msg" class="mt-3"></div></div><script>document.addEventListener('DOMContentLoaded', ()=>{ const params = new URLSearchParams(location.search); const jobId = params.get('job'); if (!jobId) return alert('Job missing'); fetch('http://localhost:5000/api/jobs').then(r=>r.json()).then(js=>{ const job = js.find(j=> j._id===jobId); document.getElementById('jobTitle').value = job ? job.title : ''; }); document.getElementById('form').addEventListener('submit', async e=>{ e.preventDefault(); const token = localStorage.getItem('token'); if (!token) { alert('Please login'); location.href='login.html'; return; } const fd = new FormData(); fd.append('jobId', jobId); fd.append('fullName', document.getElementById('fullName').value); fd.append('email', document.getElementById('email').value); fd.append('resume', document.getElementById('resume').files[0]); const res = await fetch('http://localhost:5000/api/applications', { method:'POST', headers: { Authorization: 'Bearer '+token }, body: fd }); const data = await res.json(); if (res.ok) { document.getElementById('msg').innerHTML = '<div class="alert alert-success">Applied successfully</div>'; } else { document.getElementById('msg').innerHTML = '<div class="alert alert-danger">'+(data.message||'Error')+'</div>'; } }); });</script></body></html>