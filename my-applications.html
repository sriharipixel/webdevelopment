<!doctype html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>My Applications</title><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"></head><body><nav class="navbar navbar-dark bg-primary"><div class="container"><a class="navbar-brand" href="index.html">Athis Jobs</a><div class="ms-auto'><button id='logout' class='btn btn-outline-light'>Logout</button></div></div></nav><div class="container my-4"><h3>My Applications</h3><div id="list"></div></div><script>async function load(){ const token = localStorage.getItem('token'); if(!token){ location.href='login.html'; return; } const res = await fetch('http://localhost:5000/api/applications', { headers: { Authorization: 'Bearer '+token } }); const data = await res.json(); const container = document.getElementById('list'); if(!data || data.length===0) return container.innerHTML='<p>No applications yet.</p>'; container.innerHTML=''; data.forEach(a=>{ const card = document.createElement('div'); card.className='card mb-3'; card.innerHTML = `<div class='card-body d-flex justify-content-between'><div><h5>${a.jobId.title}</h5><p class='mb-1'>${a.fullName} â€¢ ${a.email}</p><small class='text-muted'>${new Date(a.appliedAt).toLocaleString()}</small></div><div><a class='btn btn-sm btn-primary me-2' href='http://localhost:5000/uploads/${a.resumeFilename}' target='_blank'>View Resume</a><button class='btn btn-sm btn-danger' data-id='${a._id}'>Delete</button></div></div>`; container.appendChild(card); }); document.querySelectorAll('.btn-danger').forEach(b=> b.addEventListener('click', async e=>{ const id = e.currentTarget.getAttribute('data-id'); if(!confirm('Delete application?')) return; const token = localStorage.getItem('token'); const res = await fetch('http://localhost:5000/api/applications/'+id, { method:'DELETE', headers:{ Authorization: 'Bearer '+token } }); if(res.ok) load(); else alert('Delete failed'); })); } document.getElementById('logout')?.addEventListener('click', ()=>{ localStorage.removeItem('token'); localStorage.removeItem('user'); location.href='index.html'; }); document.addEventListener('DOMContentLoaded', load);</script></body></html>